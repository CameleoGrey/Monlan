классификация на 3 класса: {1, 0, -1}: следующая свеча бычья, неопределенность, медвежья
?) что считать бычьей свечой, неопределенной или медвежьей в математическом смысле? Или оставить только определение неопределенной свечи? 
?) сделать определение неопределенной свечи гиперпараметром?
*) кластеризовать свечки по соотношениям между длиннами хвостов и тел, добавить признаки кластеров (в идеале:
должны получиться типы: чистая свеча, обычная, неопределенная, стоп-свеча)

для последних N наблюдений:
*) {1, 0, -1} - i-th свеча кум дельты больше/не изменилась/меньше предыдущей
*) признак прохождения лок минимума, максимума кум дельты
*) признак нахождения около нуля кум дельты (трешхолд)
*) лин регрессия устойчивая к выбросам на показателях свечек (open, high, low, close)
*) угол наклона линии регрессии к горизонтали
*) максимальное отклонение (в пределах [-1, 1]) от линии по каждой свечке
*) минимальное отклонение (в пределах [-1, 1]) от линии по каждой свечке
*) среднее отклонение (в пределах [-1, 1]) от линии по каждой свечке
*) глобальный максимум отклонений
*) добавить признаки кластеров (в идеале должны получиться типы: чистая свеча, обычная, неопределенная, стоп-свеча)

*)Гиперпараметры: 
N наблюдений для лин рег на ценах
M наблюдений для кум дельты
alpha эксп скользящей средней при расчете кум дельты,
трешхолд изменения нормализованной кум дельты
трешхолд околонулевой отметки, 
таймфрейм, alpha регуляризатора, 
шафл тренировочной выборки или без него, 
трешхолд уверенности классификатора (в агенте, а не в прогнозной модели), 
варианты балансировки весов классов

*) метрики: accuracy, f1, precision, recall

?) глубокий автоэнкодер?
*) собрать коллекцию участков положительной и отрицательной кум дельты, натренировать на каждом из них 
скэйлер, а потом для каждого из них усреднить результаты каждого.
?) уровни (глобальные) кум дельты и признаки (локальные) на них
*) энкодинг типов свечей (меток кластеров) через категориальные энкодеры (target или unsupervised)
?) среднее энкодингов типов свечей 
*) адаптивный стоп при открытии (подсчет волатильности свечей в рамках окна, 2*std + spread)
?) динамическое изменение тейк-профита
*) оптимизация гиперпараметров (трешхолды принятия решений на основе 
   уверенности модели с предыдущего шага) агентов по кросс-валидации (без RL)
?) онлайн оптимизация гиперпараметров
*) нормальный рендер действий агента с возможностью регулирования скорости воспроизведения (складировать 
изображения с запасом по каждой сделке, а потом по окончании теста собирать в mp4)
?) отбор признаков (последние точки могут быть важнее)
?) отдельно подбирать количество наблюдений, которое используется для признаков цены и признаков кум дельты
?) оставить свободу выбора дальнейшего шага агенту-закрывателю
?) стек и усреднение моделей классификации
?) признак скошенности и остроты распределения кум дельты для M (M < N) предыдущих точек
?) определение и учет выбросов на кум дельте (правильное скалирование должно помочь)
*) поиск оптимальной точки входа на более низком таймфрейме (в виду комиссий может оказаться, что торговать 
чуть более высокий таймфрейм по такой тактике будет гораздо выгоднее, чем постоянно перезаходить на более низком)
?) признаки уровней (наработки из Avera)
?) другие варианты скользящей средней и весов в формуле расчета?
?) скалировать признаки отдельно в каждом окне
?) Time Series предикты кум дельты и признаки на ее основе (расхождение с прогнозом)
?) дообучать модель в процессе
?) будут ли для разных моделей свои оптимальные гиперпараметры, не связанные непосредственно с моделью (N, M и тд)
?) policy-based RL
*) рендер картинок графиков
?) специально зашумлять 80-90% левой части картинки графика, чтобы нейронка обращала внимание именно на последнюю часть?
?) bottleneck attention resnet
*) конкатенация разных датасетов, перемешивание частей после каждого эпизода, асинхронность (обучать после обновления % от памяти), наличие только адаптивных стопов при обучении, распараллеливание (?)
?) скалировать награды для каждого эпизода?

?) Оптимизировать гиперпараметры индикаторов

*) рефактор

*) Quasi RL with gamma=0
*) sample with replacement
*) policy gradient + variable lot size
*) Actor-Critic
*) Self-Attention NN
*) Limit-order actions  (discretize price into ~1000 parts + policy gradient + fixed stop-loss/take-profit or risk-manager which calculates optimal sl and tp points)?
?) подрубить все то же самое, но для более высокого таймфрейма и вести этот учет для торговли на более низком?
?) Генетический отбор индикаторов под разные ситуации на рынке?
?) Phik + коррелирующие инструменты?
*) TS прогноз кум дельты 
